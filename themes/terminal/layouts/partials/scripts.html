<script>
// Scripts - configurable via hugo.toml

{{ if .Site.Params.menuScramble }}     
    const LETTERS = [..."{{ .Site.Params.scrambleCharset}}"]

    document.querySelectorAll(".scramble").forEach(element => {
    let isScrambling = false; 

    element.onmouseover = event => {
        if (isScrambling) return;

        isScrambling = true;
        let iters = 0;
    
        const INTERVAL = setInterval(() => {
        event.target.innerText = Array.from(event.target.innerText)
            .map((letter,index) => {
            if(index < iters){
                return Array.from(event.target.dataset.value)[index]
            }
            return LETTERS[Math.floor(Math.random() * LETTERS.length)]
        })
            .join("");
        
        if(iters >= Array.from(event.target.dataset.value).length){
            clearInterval(INTERVAL);
            isScrambling = false;
        }
        
        iters +=1;
        },69);
    }
    });
{{ end }}
</script>